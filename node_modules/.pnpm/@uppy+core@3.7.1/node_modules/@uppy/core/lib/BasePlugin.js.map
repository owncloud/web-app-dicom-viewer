{"version":3,"names":["Translator","BasePlugin","constructor","uppy","opts","getPluginState","plugins","getState","id","setPluginState","update","setState","setOptions","newOpts","i18nInit","translator","defaultLocale","locale","i18n","translate","bind","i18nArray","translateArray","addTarget","Error","install","uninstall","render","afterUpdate"],"sources":["BasePlugin.js"],"sourcesContent":["/**\n * Core plugin logic that all plugins share.\n *\n * BasePlugin does not contain DOM rendering so it can be used for plugins\n * without a user interface.\n *\n * See `Plugin` for the extended version with Preact rendering for interfaces.\n */\n\nimport Translator from '@uppy/utils/lib/Translator'\n\nexport default class BasePlugin {\n  constructor (uppy, opts = {}) {\n    this.uppy = uppy\n    this.opts = opts\n  }\n\n  getPluginState () {\n    const { plugins } = this.uppy.getState()\n    return plugins[this.id] || {}\n  }\n\n  setPluginState (update) {\n    const { plugins } = this.uppy.getState()\n\n    this.uppy.setState({\n      plugins: {\n        ...plugins,\n        [this.id]: {\n          ...plugins[this.id],\n          ...update,\n        },\n      },\n    })\n  }\n\n  setOptions (newOpts) {\n    this.opts = { ...this.opts, ...newOpts }\n    this.setPluginState() // so that UI re-renders with new options\n    this.i18nInit()\n  }\n\n  i18nInit () {\n    const translator = new Translator([this.defaultLocale, this.uppy.locale, this.opts.locale])\n    this.i18n = translator.translate.bind(translator)\n    this.i18nArray = translator.translateArray.bind(translator)\n    this.setPluginState() // so that UI re-renders and we see the updated locale\n  }\n\n  /**\n   * Extendable methods\n   * ==================\n   * These methods are here to serve as an overview of the extendable methods as well as\n   * making them not conditional in use, such as `if (this.afterUpdate)`.\n   */\n\n  // eslint-disable-next-line class-methods-use-this\n  addTarget () {\n    throw new Error('Extend the addTarget method to add your plugin to another plugin\\'s target')\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  install () {}\n\n  // eslint-disable-next-line class-methods-use-this\n  uninstall () {}\n\n  /**\n   * Called when plugin is mounted, whether in DOM or into another plugin.\n   * Needed because sometimes plugins are mounted separately/after `install`,\n   * so this.el and this.parent might not be available in `install`.\n   * This is the case with @uppy/react plugins, for example.\n   */\n  render () {\n    throw new Error('Extend the render method to add your plugin to a DOM element')\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  update () {}\n\n  // Called after every state update, after everything's mounted. Debounced.\n  // eslint-disable-next-line class-methods-use-this\n  afterUpdate () {}\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,UAAU,MAAM,4BAA4B;AAEnD,eAAe,MAAMC,UAAU,CAAC;EAC9BC,WAAWA,CAAEC,IAAI,EAAEC,IAAI,EAAO;IAAA,IAAXA,IAAI;MAAJA,IAAI,GAAG,CAAC,CAAC;IAAA;IAC1B,IAAI,CAACD,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACC,IAAI,GAAGA,IAAI;EAClB;EAEAC,cAAcA,CAAA,EAAI;IAChB,MAAM;MAAEC;IAAQ,CAAC,GAAG,IAAI,CAACH,IAAI,CAACI,QAAQ,CAAC,CAAC;IACxC,OAAOD,OAAO,CAAC,IAAI,CAACE,EAAE,CAAC,IAAI,CAAC,CAAC;EAC/B;EAEAC,cAAcA,CAAEC,MAAM,EAAE;IACtB,MAAM;MAAEJ;IAAQ,CAAC,GAAG,IAAI,CAACH,IAAI,CAACI,QAAQ,CAAC,CAAC;IAExC,IAAI,CAACJ,IAAI,CAACQ,QAAQ,CAAC;MACjBL,OAAO,EAAE;QACP,GAAGA,OAAO;QACV,CAAC,IAAI,CAACE,EAAE,GAAG;UACT,GAAGF,OAAO,CAAC,IAAI,CAACE,EAAE,CAAC;UACnB,GAAGE;QACL;MACF;IACF,CAAC,CAAC;EACJ;EAEAE,UAAUA,CAAEC,OAAO,EAAE;IACnB,IAAI,CAACT,IAAI,GAAG;MAAE,GAAG,IAAI,CAACA,IAAI;MAAE,GAAGS;IAAQ,CAAC;IACxC,IAAI,CAACJ,cAAc,CAAC,CAAC,EAAC;IACtB,IAAI,CAACK,QAAQ,CAAC,CAAC;EACjB;EAEAA,QAAQA,CAAA,EAAI;IACV,MAAMC,UAAU,GAAG,IAAIf,UAAU,CAAC,CAAC,IAAI,CAACgB,aAAa,EAAE,IAAI,CAACb,IAAI,CAACc,MAAM,EAAE,IAAI,CAACb,IAAI,CAACa,MAAM,CAAC,CAAC;IAC3F,IAAI,CAACC,IAAI,GAAGH,UAAU,CAACI,SAAS,CAACC,IAAI,CAACL,UAAU,CAAC;IACjD,IAAI,CAACM,SAAS,GAAGN,UAAU,CAACO,cAAc,CAACF,IAAI,CAACL,UAAU,CAAC;IAC3D,IAAI,CAACN,cAAc,CAAC,CAAC,EAAC;EACxB;;EAEA;AACF;AACA;AACA;AACA;AACA;;EAEE;EACAc,SAASA,CAAA,EAAI;IACX,MAAM,IAAIC,KAAK,CAAC,4EAA4E,CAAC;EAC/F;;EAEA;EACAC,OAAOA,CAAA,EAAI,CAAC;;EAEZ;EACAC,SAASA,CAAA,EAAI,CAAC;;EAEd;AACF;AACA;AACA;AACA;AACA;EACEC,MAAMA,CAAA,EAAI;IACR,MAAM,IAAIH,KAAK,CAAC,8DAA8D,CAAC;EACjF;;EAEA;EACAd,MAAMA,CAAA,EAAI,CAAC;;EAEX;EACA;EACAkB,WAAWA,CAAA,EAAI,CAAC;AAClB"}